(window.webpackJsonpbg_rec=window.webpackJsonpbg_rec||[]).push([[0],{46:function(e,t,a){e.exports=a(59)},51:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"fetchGames",function(){return G}),a.d(n,"startGameRefresh",function(){return C}),a.d(n,"fetchGame",function(){return F});var r=a(0),c=a.n(r),i=a(21),l=a.n(i),o=(a(51),a(7)),m=a(8),s=a(9),u=a(10),p=a(11),h=a(28),d=a(26),g=a(13),f=a(30),b=a(27),E=a(43),y={gameList:[],gameListLoaded:!1,game:null,isFetchingGame:!1};var j=Object(b.c)({games:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},e);switch(t.type){case"FETCH_GAMES":return a.gameList=t.gameList,a.gameListLoaded=!0,a;case"FETCH_GAME_REQUEST":return a.isFetchingGame=!0,a;case"FETCH_GAME_SUCCESS":return a.game=t.game,a.isFetchingGame=!1,a;default:return e}}}),O=a(16),v=a(12),k=a(45),G=function(){return function(e){return fetch("/bg_rec/api/game/",{headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){return e({type:"FETCH_GAMES",gameList:t})})}},C=function(){return{type:"FETCH_GAME_REQUEST"}},F=function(e){return function(t){return fetch("/bg_rec/api/game/".concat(e),{headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return t({type:"FETCH_GAME_SUCCESS",game:e})})}},_=function(e){var t=e.children,a=Object(O.a)(e,["children"]),n=a.innerProps,r=(n.onMouseMove,n.onMouseOver,Object(O.a)(n,["onMouseMove","onMouseOver"])),i=Object.assign(a,{innerProps:r});return c.a.createElement(v.z.Option,Object.assign({},i,{className:"select-item-hover"}),t)},L=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e,t){e&&a.props.history.push("/game/".concat(e.objectid,"/"))},a.filterGames=function(e){return a.props.gameList.filter(function(t){return t.name.toLowerCase().includes(e.toLowerCase())})},a.loadOptions=function(e,t){setTimeout(function(){t(a.filterGames(e))},500)},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchGames()}},{key:"render",value:function(){return c.a.createElement(g.c,null,c.a.createElement(k.a,{cacheOptions:!0,defaultOptions:!0,loadOptions:this.loadOptions,className:"control",name:"game","aria-label":"Game",placeholder:"Select a game...",required:!0,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.objectid},onChange:this.handleChange,autoFocus:!0,components:{Option:_}}))}}]),t}(c.a.Component),w=Object(f.b)(function(e){return{gameList:e.games.gameList,gameListLoaded:e.games.gameListLoaded}},function(e){return{fetchGames:function(){e(n.fetchGames())}}})(Object(d.f)(L)),x=function(){return c.a.createElement(g.b,null,c.a.createElement("h3",null,"Welcome"),c.a.createElement("p",null,"Use the search above to find a game you like, then this tool will recommend other similar games!"))},M=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.game,a=this.props.distance;return c.a.createElement(g.h.Row,null,a?c.a.createElement("td",null,c.a.createElement(h.b,{to:"/game/".concat(e.objectid,"/")},e.name)):c.a.createElement("td",null,e.name),c.a.createElement("td",null,a?a.toFixed(2):"NA"),c.a.createElement("td",null,e.bayesaverage.toFixed(2)),c.a.createElement("td",null,t.players(e)),c.a.createElement("td",null,t.playtime(e)),c.a.createElement("td",null,c.a.createElement("a",{href:"https://boardgamegeek.com/boardgame/".concat(e.objectid)},c.a.createElement(g.d,null,c.a.createElement("i",{className:"fas fa-external-link-alt"})))))}}],[{key:"players",value:function(e){return e.minplayers&&e.maxplayers&&e.minplayers!==e.maxplayers?"".concat(e.minplayers,"-").concat(e.maxplayers):"".concat(e.minplayers)}},{key:"playtime",value:function(e){return e.minplaytime&&e.maxplaytime&&e.minplaytime!==e.maxplaytime?"".concat(e.minplaytime,"-").concat(e.maxplaytime):"".concat(e.playingtime)}}]),t}(c.a.Component),S=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).table_headers=[{icon:"fas fa-arrows-alt-h",description:"Distance (smaller number indicates greater similarity)"},{icon:"fas fa-star",description:"BGG average rating, adjusted for number of ratings"},{icon:"fas fa-users",description:"Players"},{icon:"fas fa-clock",description:"Playing time (minutes)"},{icon:"fas fa-external-link-alt",description:"Link to the game's BGG page"}],a.checkForUpdate=function(){a.props.isFetchingGame||null!=a.props.game&&parseInt(a.props.match.params.id)===a.props.game.objectid||a.props.loadGame(a.props.match.params.id)},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.checkForUpdate()}},{key:"componentDidUpdate",value:function(){this.checkForUpdate()}},{key:"render",value:function(){var e=this.props.game;return e?c.a.createElement(g.b,null,c.a.createElement(h.b,{to:"/",className:"is-pulled-right delete"}),c.a.createElement("h4",null,"Results: ",e.name),c.a.createElement(g.e,{breakpoint:"mobile"},c.a.createElement(g.e.Item,{key:e.objectid},c.a.createElement("img",{className:"image is-96x96 has-background-dark",alt:e.name,title:e.name,src:e.thumbnail,style:{objectFit:"contain"}})),e.gameneighbor_set.slice(0,8).map(function(e,t){return c.a.createElement(g.e.Item,{className:(t>1?" is-hidden-mobile":"")+(t>4?" is-hidden-touch":""),key:e.neighbor.objectid},c.a.createElement(h.b,{to:"/game/".concat(e.neighbor.objectid,"/")},c.a.createElement("img",{className:"image is-96x96 has-background-dark",alt:e.neighbor.name,title:e.neighbor.name,src:e.neighbor.thumbnail,style:{objectFit:"contain"}})))})),c.a.createElement("small",null,c.a.createElement(g.h,null,c.a.createElement(g.h.Head,null,c.a.createElement(g.h.Row,null,c.a.createElement("th",null,"Game"),this.table_headers.map(function(e,t){var a=e.icon,n=e.description;return c.a.createElement("th",{key:t,title:n},c.a.createElement(g.d,null,c.a.createElement("i",{className:a})))}))),c.a.createElement(g.h.Body,null,c.a.createElement(M,{game:e,key:e.objectid}),e.gameneighbor_set.map(function(e){return c.a.createElement(M,{game:e.neighbor,distance:e.distance,key:e.neighbor.objectid})})))),c.a.createElement("p",null,"\xa0"),c.a.createElement("h4",null,"Columns Explained"),this.table_headers.map(function(e,t){var a=e.icon,n=e.description;return c.a.createElement(g.f,{key:t},c.a.createElement(g.f.Item,{align:"left"},c.a.createElement(g.d,null,c.a.createElement("i",{className:a}))),c.a.createElement(g.f.Item,{align:"content"},n))})):""}}]),t}(c.a.Component),T=Object(f.b)(function(e){return{game:e.games.game,isFetchingGame:e.games.isFetchingGame}},function(e){return{loadGame:function(t){e(n.startGameRefresh()),e(n.fetchGame(t))}}})(S),N=Object(b.d)(j,Object(b.a)(E.a)),A=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement(g.g,null,c.a.createElement(g.a,null,c.a.createElement(f.a,{store:N},c.a.createElement(h.a,{basename:"/bg_rec"},c.a.createElement(g.i,null,"Board Game Recommender"),c.a.createElement(w,null),c.a.createElement(d.c,null,c.a.createElement(d.a,{exact:!0,path:"/game/:id",component:T}),c.a.createElement(d.a,{component:x}))))))}}]),t}(c.a.Component);l.a.render(c.a.createElement(A,null),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.1ccd1197.chunk.js.map