{% extends "deveconsim/base.html" %}
{% load staticfiles %}
{% load humanize %}
{% load deveconsim_extras %}

{% block content %}
    <div class="row">
        <div class="col-sm-6 col-sm-offset-3">
            <h4 class="row">
                <div class="col-xs-10"><span class="glyphicon glyphicon-grain" aria-hidden="true"></span> Crops</div>
                <div class="col-xs-2"><button type="button" class="btn btn-default pull-right" data-toggle="modal" data-target="#moreInfo" title="More explanation"><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span></button></div>
            </h4>
            <p>Your country's economy depends upon agriculture. This page allows you to change what type of pesticides are used in your country and how your crop land is allocated between corn and cocoa.</p>
            <form role="form" class="form-horizontal" method="post">
            {% csrf_token %}
            {% for field in crops_form %}
                {% if field.name == 'corn' %}
                <div class="form-group">
                    <label for="plantable_area" class="col-sm-5 control-label">
                        Total Plantable Area
                    </label>
                    <div class="col-sm-5">
                        <p class="form-control-static" id="plantable_area">{{turn.land|intcomma}} ha</p>
                    </div>
                </div>
                {% endif %}
                <div class="form-group">
                    <label for="{{ field.id_for_label }}" class="col-sm-5 control-label">
                        {{ field.label }}
                    </label>
                    <div class="col-sm-5">
                        {% if field.errors %}<div class='alert alert-danger'>{% endif %}
                        {{ field.errors }}
                        {{ field }}
                        {% if field.errors %}</div>{% endif %}
                    </div>
                </div>
            {% endfor %}
                <div class="form-group">
                    <div class="col-sm-5 col-sm-offset-5 col-xs-12">
                        <button type="submit" class="btn btn-primary btn-block">Update</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
{% endblock %}

{% block script %}{{ block.super }}
    <script>
        $(".touchspin-ha").each(function(index) {
            $(this).TouchSpin({
                min: 0,
                max: {{turn.land}},
                step: 10000,
                decimals: 0,
                boostat: 50000,
                maxboostedstep: 100000,
                postfix: 'ha'
            });
        });
    </script>
{% endblock %}

{% block moreinfotitle %}More about Crops{% endblock %}

{% block moreinfo %}
    <p>This page allows you to control portions of how crops are grown in your country. You may choose between two crops: corn and cocoa.</p>
    <p>Corn represents the many types of basic food crops that are grown in developing countries. Often these crops are grown by small farmers simply for food (rather than to sell). This is called subsistence farming. These crops usually fetch fairly low prices when they are sold as exports.</p>
    <p>Cocoa represents cash crops-- crops grown by many countries for the sole purpose of generating income. These crops usually cannot be eaten or are too expensive for the local people to eat in any substantial quantity. However, they often bring badly needed money into the country though their export. Other cash crops include coffee, sugar, tobacco, and many others.</p>
    <p>You can find current prices for both corn and cocoa in the table with general information on crops in your country. If you click on the link that is one of the crop prices, you will be taken to a page with a graph of that crop's prices so far.</p>
    <p>You can change which crops you have planted in your country by clicking on the link at the bottom of this text where it says &quot;Actions&quot;, or by clicking on one of the links that is either how much corn or cocoa you have planted already. At the bottom of the page that lets you change how your crops are planted you will find a table with more information.</p>
    <p>It costs money to change what types of crops you have planted. This price is different for the two crops. The World Bank will give you a loan to cover the cost of planting cocoa (not corn), however, because the World Bank believes increased export of cash crops will help your country's economy.</p>
    <p>You may also choose which type of pesticides that farms in your country will use. Pesticides are paid for by the owners of the farms, not the government. Your first option is to use no pesticides, which will result in relatively low crop yields (the amount produced) but will not harm the environment. You can also choose to use either cheap or expensive pesticides. The cheap pesticides in this game have been declared illegal in the U.S.A. due to their negative effects on the environment. They will result in substantial increases in crop yields, but yields will gradually decrease over time due to the environmental damage. The expensive pesticides in this game are more costly than the cheap pesticides, but they do not cause as much environmental damage. They increase yields even slightly more than the cheap pesticides, and yields decrease by a smaller amount than with the cheap pesticides. You can find a detailed table with the effects of all pesticides at the bottom of the page that allows you to change pesticide use (which you can get to from the link at the bottom of this text where it says &quot;Actions&quot;, or by clicking on the link that is your current pesticide use in the table with general crop information).</p>
    <p>When you are done reading this information and have made any changes that you wish to make, please return to the main page of the simulation game and click the &quot;End Year&quot; button to continue with the tutorial. You may find that you do not have enough income to cover expenses for your country; if that is the case, you will probably have to return to this page and make more changes. You can check how much income your government is generating on the main page of the simulation game, in the &quot;Budget&quot; table. If you wish, you may end with a negative balance, so long as it doesn't exceed the size of your General Fund. You may only have a negative balance larger than your General Fund if the difference is less than the size of your World Bank interest payment for the year, in which case the World Bank will make you a special offer.</p>
    <div class="alert alert-info">
        <div class="media">
            <div class="media-left">
                <img class="media-object img-rounded" src="{% static 'deveconsim/img/business.gif' %}" alt="Business consultant" style="background: #05a;">
            </div>
            <div class="media-body">
                <h4 class="media-heading">Business Consultant</h4>
                &quot;You should grow cocoa for export since it has a much higher price than corn. You can import corn from somewhere else to feed your citizens with all the money you'll make!&quot;
            </div>
        </div>
        <div class="media">
            <div class="media-left">
                <img class="media-object img-rounded" src="{% static 'deveconsim/img/activist.gif' %}" alt="Social activist" style="background: #05a;">
            </div>
            <div class="media-body">
                <h4 class="media-heading">Social Activist</h4>
                &quot;You should grow enough corn to satisfy all local needs before growing any cocoa. It is not safe to depend upon another country for something as important as food. Plus, the indigenous peoples have been farming corn for many generations &dash; it is part of their culture.&quot;
            </div>
        </div>
    </div>
{% endblock %}