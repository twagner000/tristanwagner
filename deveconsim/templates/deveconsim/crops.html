{% extends "deveconsim/base.html" %}
{% load staticfiles %}
{% load humanize %}
{% load deveconsim_extras %}
{% load widget_tweaks %}

{% block content %}
    <div class="row">
        <div class="col-sm-6 col-sm-offset-3">
            <h4 class="row">
                <div class="col-xs-10"><span class="glyphicon glyphicon-grain" aria-hidden="true"></span> Crops</div>
                <div class="col-xs-2"><button type="button" class="btn btn-default pull-right" data-toggle="modal" data-target="#moreInfo" title="More explanation"><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span></button></div>
            </h4>
            <p>Your country does not start out with much industry, so you rely on agriculture for most of your income.
                This page allows you to choose which type of pesticides are used in your country and how your cropland is allocated between corn and cocoa.</p>
            <form role="form" class="form-horizontal" method="post">
            {% csrf_token %}
            {% for field in form %}
                {% if field.name == 'corn' %}
                <div class="form-group">
                    <label for="plantable_area" class="col-sm-5 control-label">
                        Total Plantable Area
                    </label>
                    <div class="col-sm-5">
                        <p class="form-control-static" id="plantable_area">{{turn.land|intcomma}} kha</p>
                    </div>
                </div>
                {% endif %}
                <div class="form-group">
                    <label for="{{ field.id_for_label }}" class="col-sm-5 control-label">
                        {{ field.label }}
                    </label>
                    <div class="col-sm-7">
                        <div class='row{% if field.errors %} alert alert-danger{% endif %}'>
                            {% if field.errors %}<div class="col-sm-12">{% for error in field.errors %}<p>{{ error }}</p>{% endfor %}</div>{% endif %}
                            {% if field.name == 'corn' or field.name == 'cocoa' %}
                            <div class="col-sm-7">
                                <div class="input-group">
                                    {{ field|add_class:"form-control" }}
                                    <span class="input-group-addon">kha</span>
                                </div>
                            </div>
                            <div class="col-sm-5">
                                <p class="form-control-static text-muted">
                                {% if field.name == "corn" %}(was {{turn.start_corn|intcomma}} kha){% endif %}
                                {% if field.name == "cocoa" %}(was {{turn.start_cocoa|intcomma}} kha){% endif %}
                                </p>
                            </div>
                            {% else %}
                            <div class="col-sm-7">{{ field|add_class:"form-control" }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}
            {% if form.errors.insufficient_land %}<div class="alert alert-danger">{{form.errors.insufficient_land}}</div>{% endif %}
                <div class="form-group">
                    <div class="col-sm-4 col-sm-offset-5 col-xs-12">
                        <button type="submit" class="btn btn-primary btn-block">Update</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
{% endblock %}

{% block moreinfotitle %}More About <span class="glyphicon glyphicon-grain" aria-hidden="true"></span> Crops{% endblock %}

{% block moreinfo %}{% include 'deveconsim/tutorial_crops.html' %}{% endblock %}